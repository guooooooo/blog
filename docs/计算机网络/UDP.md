---
title: UDP
date: 2019-08-23
tags:
 - 计算机网络
categories:
 - 计算机网络
---

## 传输层协议 TCP/UDP

### TCP和UDP有哪些区别

**TCP面向连接，UDP面向无连接**

在互通之前，面向连接的协议会先建立连接。

所谓的面向连接，是为了在客户端和服务端维护连接，而建立一定的数据结构来维护双方交互的状态，用这样的数据结构来保证所谓的面向连接的特性。

**TCP提供可靠交付**

通过TCP连接传输的数据，无差错、不丢失、不重复、并且按序到达。而UDP继承了IP包的特性，不保证不丢失，不保证按顺序到达。

**TCP是面向字节流的**

TCP发送数据的时候发的是一个流。而UDP继承了IP的特性，基于数据包的一个一个的发，一个一个的收。

**TCP是有拥塞控制的**

当TCP意识到包丢弃了或者网络环境不好了，会根据情况调整行为。UDP则不会。

**TCP其实是一个有状态的服务，而UDP则是无状态的**

### UDP 包头
![gUyu4K.png](https://t1.picb.cc/uploads/2019/10/10/gUyu4K.png)

当发送的UDP的包到达目标机器后，发现MAC地址匹配，于是就取下来，讲剩下的包传给处理IP层的代码。把IP头取下来，发现目标IP匹配，然后在IP头里面有个8位协议会表示数据是TCP还是UDP。如果知道UDP头的格式，就能从数据里面解析出来，里面的数据应该交给应用程序自己去处理。

无论应用程序写的使用TCP传输数据还是UDP传数据，都要监听一个端口。正是这个端口，用来区分应用程序。无论是TCP还是UDP包头里面应该有端口号，根据端口号，将数据交给相应的应用程序。

### UDP 使用场景

**需要资源少，在网络情况比较好的内网，或者对于丢包不敏感的应用（DHCP,TFTP）**

**不需要一对一沟通，建立连接，而是可以广播的应用（DHCP,IGMP组播）**

**需要处理速度快，时延低，可以容忍少数丢包，但是要求即使网络拥塞，也毫不退缩**



